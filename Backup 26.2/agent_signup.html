<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Agent Signup</title>
  <link rel="stylesheet" href="agent_signup.css">

  <script>
    function validateForm() {
      const pw1 = document.getElementById("password").value;
      const pw2 = document.getElementById("retype_password").value;
      if (pw1 !== pw2) {
        alert("Passwords do not match!");
        return false;
      }

      // Open confirmation modal instead of submitting immediately
      openSubmitModal();
      return false; // Prevent form from submitting right away
    }

    /* === Cancel Modal === */
    function openCancelModal() {
      document.getElementById("cancelModal").style.display = "flex";
    }
    function closeCancelModal() {
      document.getElementById("cancelModal").style.display = "none";
    }
    function confirmCancel() {
      window.location.href = "login.php";
    }

    /* === Submit Modal === */
    function openSubmitModal() {
      document.getElementById("submitModal").style.display = "flex";
    }
    function closeSubmitModal() {
      document.getElementById("submitModal").style.display = "none";
    }
    function confirmSubmit() {
      document.getElementById("signupForm").submit(); // Actually submit form
    }
  </script>
</head>
<body>

<div class="container">
  <h2>New Agent Signup</h2>
  <form id="signupForm" action="agent_signup.php" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
    <label>Full Name:</label>
    <input type="text" name="full_name" required>

    <label>Email:</label>
    <input type="email" name="email" required>

    <label>Password:</label>
    <input type="password" name="password" id="password" required>

    <label>Retype Password:</label>
    <input type="password" id="retype_password" required>

    <label>Contact Number:</label>
    <input type="text" name="contact" required>

    <label>Address:</label>
    <textarea name="address" rows="3" required></textarea>

    <label>Upload 2x2 Picture:</label>
    <input type="file" name="picture" accept="image/*" required>

    <button type="submit" class="submit-btn">Submit Registration</button>
  </form>
  <button onclick="openCancelModal()" class="cancel-btn">Cancel Registration</button>
</div>

<!-- Cancel Modal -->
<div class="modal-overlay" id="cancelModal">
  <div class="modal-content">
    <h4>Cancel Registration</h4>
    <p>Are you sure you want to cancel your registration?</p>
    <div class="modal-buttons">
      <button onclick="confirmCancel()" class="btn btn-danger">Yes, Cancel</button>
      <button onclick="closeCancelModal()" class="btn btn-secondary">No, Stay</button>
    </div>
  </div>
</div>

<!-- Submit Modal -->
<div class="modal-overlay" id="submitModal">
  <div class="modal-content">
    <h4>Confirm Submission</h4>
    <p>Do you want to submit your registration details?</p>
    <div class="modal-buttons">
      <button onclick="confirmSubmit()" class="btn btn-success">Yes, Submit</button>
      <button onclick="closeSubmitModal()" class="btn btn-secondary">Review Again</button>
    </div>
  </div>
</div>

</body>
</html>
